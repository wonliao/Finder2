<style>
.location {
  font-size: 14px;
  border-radius: 4px;
  -webkit-border-radius: 4px;
}

.name {
  font-weight: 500;
  line-height: 16px;
  font-size: 15px;
  margin-bottom: 6px;
}

.list-item-container {
  line-height: 1;
  padding: 15px 0px 15px 15px;
}

.thumbnail {
  width: 80px;
  height: 80px;
  opacity: 0.4;
  margin-bottom: 6px;
}

.desc {
  line-height: 1.2;
  font-size: 13px;
}

.conditional {
    font-size: 2vw;
    width:100%; 
    font-size:6vw; padding:0 0 0 2%; 
    height:10%;
}

.conditional_span {
    line-height:8vh; 
    display:inline-block;
    white-space:nowrap;
    font-size: 3vw;
}

.conditional_button {
    float:right; line-height:8vh; display:inline-block;
}

.conditional_icon{
    color: red;
}
/*
#result_list {
    list-style-type:none;
    white-space:nowrap;
    overflow-x:scroll;
    width: 100%;
}

.ons-list-item{
    display:inline-block;
}

li {
     display:inline-block;
} 
*/
</style>

<ons-page >

    <ons-toolbar style="background:#6dccf3; height:15%;">
        <div class="left" style="height:100%; width:100%;">
            <div style="margin:12% 0% 0% 10%; height:50%;" ons-if-platform="ios">
                <ons-toolbar-button onclick="menu.setMainPage('home.html', {closeMenu: true})" style="">
                    <img src="images/img_logo@460x160.png" style="height:110%;"/>
                </ons-toolbar-button>
            </div>
            <div style="margin:20% 0% 0% 10%; height:50%;" ons-if-platform="android">
                <ons-toolbar-button onclick="menu.setMainPage('home.html', {closeMenu: true})" style="">
                    <img src="images/img_logo@460x160.png" style="height:100%;"/>
                </ons-toolbar-button>
            </div>
            <div style="margin:20% 0% 0% 10%; height:50%;" ons-if-platform="chrome">
                <ons-toolbar-button onclick="menu.setMainPage('home.html', {closeMenu: true})" style="">
                    <img src="images/img_logo@460x160.png" style="height:100%;"/>
                </ons-toolbar-button>
            </div>
        </div>
        <div class="right" style="height:100%;width:100%;top: 0px;position: absolute;right: 0;">
            <div style="padding:10% 5% 0% 5%; height:50%;"  ons-if-platform="ios">
                <ons-toolbar-button onclick="menu.toggleMenu()">
                    <ons-icon icon="ion-navicon" style="font-size: 32px; width: 1em;"></ons-icon>
                </ons-toolbar-button>
            </div>
            <div style="padding:20% 5% 0% 5%; height:50%;"  ons-if-platform="android">
                <ons-toolbar-button onclick="menu.toggleMenu()">
                    <ons-icon icon="ion-navicon" style="font-size: 32px; width: 1em;"></ons-icon>
                </ons-toolbar-button>
            </div>
            <div style="padding:20% 5% 0% 5%; height:50%;"  ons-if-platform="chrome">
                <ons-toolbar-button onclick="menu.toggleMenu()">
                    <ons-icon icon="ion-navicon" style="font-size: 32px; width: 1em;"></ons-icon>
                </ons-toolbar-button>
            </div>
        </div>
    </ons-toolbar>

        <div style="height:10%;"></div>
        
        <ons-row>
            <ons-col class="info-col">
                <div class="left" style="margin:auto;">
                    <ons-button class="button--quiet" onclick="menu.setMainPage('page2-1.html', {closeMenu: true})">
                        <i class="ion-ios-arrow-back ons-back-button__icon" style="vertical-align: top; background-color: transparent; height: 44px; line-height: 44px; font-size: 36px; margin-left: 8px; margin-right: 2px; width: 16px; display: inline-block; padding-top: 1px;"></i>
                        <span style="vertical-align: top; display: inline-block; line-height: 44px; height: 44px;" class="back-button__label"><span class="ng-scope">Back</span></span>
                    </ons-button>
                </div>
            </ons-col>
            <!--
            <ons-col class="info-col">
                <div class="right" style="font-size:4vw; float:right; padding:12% 10% 0 0;">
                    <span class="page2_3_item_1">搜尋結果，共</span> <span id="product_sum">0</span> <span class="page2_3_item_2">樣產品</span>
                </div>
            </ons-col>
            -->
        </ons-row>
        
        <ons-row id="conditional_div">
            <!--
            <ons-row data-index="1">
                <div onclick="openSlot1()" class="text-input text-input--underbar conditional" style="background:#F00; width:50%; height:8vh;">
                    <span id="slot1_result" class="conditional_span">name</span>
                </div>
                <div onclick="openSlot2()" class="text-input text-input--underbar conditional" style="background:#0F0; width:35%; height:8vh;">
                    <span id="slot2_result" class="conditional_span">value</span>
                </div>
                <div class="text-input text-input--underbar conditional" style="width:15%; height:8vh; line-height:8vh; margin:auto; padding:0; text-align:center;">
                    <img src="images/remove.png" style="width:6vh; vertical-align:middle;"/>
                </div>
            </ons-row>
            -->
        </ons-row>

        <ons-button modifier="quiet" onclick="addConditional()">
            <ons-icon icon="ion-plus-circled" size="40px" fixed-width="true"></ons-icon>
        </ons-button>


        <ons-list id="result_list"></ons-list>
        
        
    </ons-page>

<script>

ons.ready(function() {
    setTimeout(function() {

        $(".page2_3_item_1").text(translator.getStr("page2_3_item_1"));
        $(".page2_3_item_2").text(translator.getStr("page2_3_item_2"));

        localStorage.setItem("index", 0);
    
        setFilter();
    }, 10);
});

var compareItems = [
[1, "品名", ["全部"]],
[2, "產地", ["全部"]],
[3, "產業", ["全部"]],
[4, "產品品牌", ["全部"]],
[5, "等級", ["全部"]],
[6, "顏色", ["全部"]],
[7, "熔體流動速率", ["全部", "220℃×10KG", "200℃×5KG", "230℃×3.8KG", "300℃×1.2KG"]],
[8, "質量密度", ["全部"]],
[9, "拉伸強度", ["全部", "50mm/min yield", "50mm/min break", "5mm/min yield", "5mm/min break", "50mm/min yield 4mm"]],
[10, "延伸率", ["全部", "50mm/min", "5mm/min", "50mm/min yield 4mm", "50mm/min break 4mm", "1/8” 6 mm/min"]],
[11, "彎曲強度", ["全部"]],
[12, "彎曲彈性模數", ["全部", "2mm/min", "2mm/min 4mm"]],
[13, "IZOD衝擊強度", ["全部", "23℃ Notched", "-30℃ Notched", "23℃ Unnotched", "-30℃ Unnotched", "23℃ 1/8” notched", "-30℃, 1/8” notched", "ASTM D256 (Notched)"]],
[14, "Charpy衝擊強度", ["全部", "23℃ Notched", "-30℃ Notched", "23℃ Unnotched", "-30℃ Unnotched", "23℃ 1/8” notched", "-30℃ 1/8” notched"]],
[15, "維氏軟化溫度", ["全部", "50℃/hr 1KG", "50℃/hr 5KG", "50℃/hr 1KG,4mm", "50℃/hr 5KG,4mm"]],
[16, "熱變形溫度", ["全部", "1.8MPa unannealed", "1.8MPa annealed", "1.8MPa 120℃/hr 4mm unannealed", "1.86Kg 4mm unannealed", "1.86Kg 4mm,annealed", "1/4” 120℃/hr"]],
[17, "線膨脹係數", ["全部"]],
[18, "燃燒性", ["全部"]],
[19, "收縮率", ["全部"]],
[20, "符號", ["全部"]],
[21, "產品特性與應用", ["全部"]],
[22, "介電係數1MHz", ["全部"]],
[23, "體積電阻率", ["全部"]],
[24, "表面電阻率", ["全部"]],
[25, "丁二烯與苯乙烯比例", ["全部"]],
[26, "揮發份", ["全部"]],
[27, "灰份", ["全部"]],
[28, "含油量", ["全部"]],
[29, "熔體流動係數", ["全部", "200℃ 5Kg", "190℃ 5Kg"]],
[30, "硬度", ["全部"]],
[31, "比重", ["全部"]],
[32, "凝膠含量", ["全部"]],
[33, "色相", ["全部"]],
[34, "CisContent", ["全部"]],
[35, "VinylContent", ["全部"]],
[36, "包裝重量", ["全部"]],
[37, "包裝膜", ["全部"]],
[38, "Yellow Index", ["全部"]],
[39, "螺旋流", ["全部"]],
[40, "門尼指數", ["全部"]],
[41, "溶液黏度", ["全部"]],
];

function openSlot1(index) {

    var items = [];
    for(var i=0; i<compareItems.length; i++) {
        
        //var index = compareItems[i][0];
        var value = compareItems[i][1];
        //var parameter = compareItems[i][2];

        items.push(value);
    }

    setSpinningWheel("slot1", index, items);
}

function openSlot2(index) {

    var key = localStorage.getItem("slot1_selected");
    console.log("openSlot2 ==> key("+key+")");
    
    var temp = compareItems[key][2];
    //var size = _items.length;
    var items = [];
    for(var i=0; i<temp.length; i++) {
        
        var value = temp[i];
        items.push(value);
    }

    //var items = ["value1", "value2", "value3", "value4", "value5", "value6"];
    setSpinningWheel("slot2", index, items);
}

function setSpinningWheel(slot, index, items) {
    
    var defaultValue = 0; //Math.floor((items.length -1) / 2);
    console.log("openSlot"+slot+" indxe("+index+") defaultValue("+defaultValue+")");
    
    if(SpinningWheel.isExist())     SpinningWheel.destroy();
	SpinningWheel.addSlot(items, '', defaultValue);
	SpinningWheel.setCancelAction(cancel);
    SpinningWheel.setIndex(index);
    if(slot == "slot1")     SpinningWheel.setDoneAction(slot1Done);
    else                    SpinningWheel.setDoneAction(slot2Done);
    //SpinningWheel.setScrollDone(scrollDone);
	SpinningWheel.open();
}

function slot1Done() {
    
    var index = SpinningWheel.getIndex();
    var results = SpinningWheel.getSelectedValues();
    var value = results.values.join(':');
    var key = results.keys.join(':');
    $("#slot1_result_"+index).text(results.values.join(':'));
    localStorage.setItem("slot1_selected", key);

    console.log("slot1Done index("+index+") key("+key+") value("+value+")");
	
    
    setFilter();
}

function slot2Done() {

    var index = SpinningWheel.getIndex();
    console.log("slot1Done indxe("+index+")");
    var results = SpinningWheel.getSelectedValues();
    $("#slot2_result_"+index).text(results.values.join(':'));

	//localStorage.setItem("park_time", results.values.join(':'));
	//alert(localStorage.getItem("park_time"));
    
    setFilter();
}

function scrollDone() {
}

function cancel() {
    //document.getElementById('date_result').innerHTML = 'cancelled!';
}

function scrollDone() {
    
    console.log("Scroll Done");
    openSlot1();
}

function addConditional() {
    
    var index = localStorage.getItem("index");
    console.log("addConditional index("+index+")");
    index++;
    localStorage.setItem("index", index);
    console.log("addConditional index("+index+")");

    var str = "";
    str +=  '<ons-row id="conditional_'+index+'">';
    str +=     '<div onclick="openSlot1('+index+')" class="text-input text-input--underbar conditional" style="background:#F00; width:38%; height:8vh;">';
    str +=          '<span id="slot1_result_'+index+'" class="conditional_span input_name">品名</span>';
    str +=      '</div>';
    str +=      '<div onclick="openSlot2('+index+')" class="text-input text-input--underbar conditional" style="background:#0F0; width:47%; height:8vh;">';
    str +=          '<span id="slot2_result_'+index+'" class="conditional_span input_value">全部</span>';
    str +=      '</div>';
    str +=      '<div onclick="delConditional('+index+')" class="text-input text-input--underbar conditional" style="width:15%; height:8vh; line-height:8vh; margin:auto; padding:0; text-align:center;">';
    str +=          '<img src="images/remove.png" style="width:6vh; vertical-align:middle;"/>';
    str +=      '</div>';
    str +=  '</ons-row>';

    $('#conditional_div').append(str);
    
    setFilter();
}

function delConditional(index) {

    console.log("delConditional index("+index+")");
    $("#conditional_"+index).slideUp("100", function() {
        $(this).remove();
    });
}

function setFilter() {
    
    var searchNames = [];
    var searchValues = [];

    $(".input_name").each(function() {

        var name = $(this).text();
        //console.log("name("+name+")");
        searchNames.push(name);
    });
    
    $(".input_value").each(function() {

        var value = $(this).text();
        //console.log("value("+value+")");
        searchValues.push(value);
    });
    
    var searchNamesStr = searchNames.toString();
    var searchValuesStr = searchValues.toString();
    //console.log("searchNamesStr("+searchNamesStr+")");
    //console.log("searchValuesStr("+searchValuesStr+")");

/*
    $.post(
        api_url + "indexplates/chimeicorp/get_compare.php",
        {
            "searchNames": searchNamesStr,
            "searchValues": searchValuesStr
        },
        function( data ) {
            console.log(data);
            
            var list_str = "";
            
            // 沒有結果
            if(data == null) {
                
                list_str += '<ons-list-item class="list-item-container" style="text-align:left; padding-top:10%;">';
                list_str +=     '<ons-row>';
                list_str +=         '<ons-col width="100" style="margin:auto; text-align:center;">';
                list_str +=             "<span class='search_result'>沒有結果</span>";
                list_str +=         '</ons-col>';
                list_str +=     '</ons-row>';
                list_str += '</ons-list-item>';
                
            } else {
            
                $('#product_sum').text(data.length);

                for(var key in data) {

                    var item = data[key];

                    var index = item["index"];
                    var name = item["name"];            // PA-707
                    var place = item["place"];          // 仁德
                    var industry = item["industry"];    // 待建立
                    var brand = item["brand"];          // POLYLAC®ABS
                    var grade = item["grade"];          // 一般級General
                    var color = item["color"];          // 白.黑色
                    var image = "images/abs.png";
                    
                    var pdf = api_url + "indexplates/chimeicorp/pdf/" + name + ".pdf";

                    list_str += '<ons-list-item class="list-item-container" style="text-align:left; padding-top:5%;">';
                    list_str +=     '<ul style="list-style:none;">';
                    list_str +=         '<li style="padding:0 5% 0 0; width:40%; float:left;">';
                    list_str +=             grade;
                    list_str +=         '</li>';
                    list_str +=         '<li style="padding:0 5% 0 5%; width:30%; float:left;">';
                    list_str +=             '<span>'+name+'</span>';
                    list_str +=         '</li>';
                    list_str +=         '<li style="padding:0 0 0 0%; width:10%; float:left;">';
                    list_str +=             '<ons-toolbar-button onclick="pdf_btn_click(\''+pdf+'\')">';
                    list_str +=                 '<img src="images/btm_detail.png" width="25"/>';
                    list_str +=             '</ons-toolbar-button>';
                    list_str +=         '</li>';
                    list_str +=     '</ul>';
                    list_str += '</ons-list-item>';
                }
            }

            $("#result_list").empty().append(list_str);
            
            
        }, 
        "json"
    );
*/
/*
   var list_str = "";

                    list_str += '<ons-list-item class="list-item-container" style="text-align:left; padding-top:5%;">';
                    list_str +=     '<ul style="list-style:none;">';
                    list_str +=         '<li style="padding:0 5% 0 0; width:500%;">';
                    list_str +=             'grade';
                    list_str +=         '</li>';
                    list_str +=         '<li style="padding:0 5% 0 5%; width:30%;">';
                    list_str +=             '<span>name</span>';
                    list_str +=         '</li>';
                    list_str +=         '<li style="padding:0 0 0 0%; width:10%;">';
                    list_str +=             '<ons-toolbar-button>';
                    list_str +=                 '<img src="images/btm_detail.png" width="25"/>';
                    list_str +=             '</ons-toolbar-button>';
                    list_str +=         '</li>';
                    list_str +=     '</ul>';
                    list_str += '</ons-list-item>';
                    
                    
                    list_str += '<ons-list-item class="list-item-container" style="text-align:left; padding-top:5%;">';
                    list_str +=     '<ul style="list-style:none;">';
                    list_str +=         '<li style="padding:0 5% 0 0; width:500%;">';
                    list_str +=             'grade';
                    list_str +=         '</li>';
                    list_str +=         '<li style="padding:0 5% 0 5%; width:30%;">';
                    list_str +=             '<span>name</span>';
                    list_str +=         '</li>';
                    list_str +=         '<li style="padding:0 0 0 0%; width:10%;">';
                    list_str +=             '<ons-toolbar-button>';
                    list_str +=                 '<img src="images/btm_detail.png" width="25"/>';
                    list_str +=             '</ons-toolbar-button>';
                    list_str +=         '</li>';
                    list_str +=     '</ul>';
                    list_str += '</ons-list-item>';
        
    
     $("#result_list").empty().append(list_str);
*/
     
     
     
}

</script>
